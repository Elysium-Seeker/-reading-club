<!DOCTYPE html>
<html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ç¾¤ç»„é¡µ</title><style>body{font-family:'Segoe UI','Microsoft YaHei',sans-serif;background:#f5f0eb;color:#3a3a3a;margin:0}.wrap{max-width:1080px;margin:0 auto;padding:20px}.btn{padding:6px 12px;border:1px solid #d8c7b7;border-radius:8px;background:#fff;text-decoration:none;color:#5b4636}.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.card{background:#fff;border:1px solid #eadfd5;border-radius:12px;padding:14px;margin-top:14px}.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:10px}.meta{font-size:12px;color:#777}</style></head><body><div class="wrap"><div class="row"><a class="btn" id="backHome" href="index.html">â† è¿”å›ä¹¦å•</a><a class="btn" id="toProfile" href="profile.html">ä¸ªäººä¸»é¡µ</a><h2 id="title" style="margin:0 0 0 auto;">ğŸ‘¥ ç¾¤ç»„é¡µ</h2></div><div id="content"></div></div><script>const p=new URLSearchParams(location.search);const userId=p.get('userId')||localStorage.getItem('readingclub_userId')||'';const groupId=p.get('groupId')||localStorage.getItem('readingclub_groupId')||'';localStorage.setItem('readingclub_userId',userId);localStorage.setItem('readingclub_groupId',groupId);document.getElementById('title').textContent=`ğŸ‘¥ ç¾¤ç»„ï¼š${groupId||'æœªè®¾ç½®'}`;document.getElementById('backHome').href=`index.html?userId=${encodeURIComponent(userId)}&groupId=${encodeURIComponent(groupId)}`;document.getElementById('toProfile').href=`profile.html?userId=${encodeURIComponent(userId)}&groupId=${encodeURIComponent(groupId)}`;async function api(u){return (await fetch(u)).json();}function esc(s){const d=document.createElement('div');d.textContent=s||'';return d.innerHTML;}async function load(){if(!groupId){document.getElementById('content').innerHTML='<div class="card">è¯·å…ˆåˆ°é¦–é¡µå¡«å†™ç¾¤ç»„ IDã€‚</div>';return;}const d=await api(`/api/groups/${encodeURIComponent(groupId)}/overview`);const members=d.members||[];const per=d.perUserShelves||{};const everyone=d.everyoneReading||[];const reviews=d.reviews||[];document.getElementById('content').innerHTML=`<div class="card"><h3 style="margin:0 0 8px 0;">ğŸ‘¥ æˆå‘˜ (${members.length})</h3><div>${members.map(m=>`<span style="display:inline-block;background:#efdfc9;padding:3px 10px;border-radius:12px;margin:0 6px 6px 0;">@${esc(m)}</span>`).join('')||'<span class="meta">æš‚æ— æˆå‘˜</span>'}</div></div><div class="card"><h3 style="margin:0 0 8px 0;">ğŸ“– å¤§å®¶éƒ½åœ¨è¯»ï¼ˆ2äººåŠä»¥ä¸Šï¼‰</h3>${everyone.map(b=>`<div style="padding:8px 0;border-bottom:1px dashed #eee;"><strong>${esc(b.title)}</strong><div class="meta">${esc((b.users||[]).join('ã€'))}</div></div>`).join('')||'<div class="meta">æš‚æ— </div>'}</div><div class="grid">${members.map(m=>`<div class="card"><h3 style="margin:0 0 8px 0;">@${esc(m)}</h3>${['candidate','reading','finished'].map(k=>`<details style="margin-bottom:6px;"><summary style="cursor:pointer;">${k==='candidate'?'ğŸ“‹ æƒ³è¯»':k==='reading'?'ğŸ“– åœ¨è¯»':'âœ… å·²è¯»'} (${(per[m]?.[k]||[]).length})</summary><div style="margin-top:6px;">${(per[m]?.[k]||[]).map(b=>`<div style="font-size:13px; padding:4px 0;">${esc(b.title)}</div>`).join('')||'<span class="meta">æš‚æ— </span>'}</div></details>`).join('')}</div>`).join('')}</div><div class="card"><h3 style="margin:0 0 8px 0;">ğŸ’¬ ç¾¤ç»„ä¹¦è¯„</h3>${reviews.map(r=>`<div style="padding:8px 0;border-bottom:1px dashed #eee;"><div class="meta">@${esc(r.userId)} Â· ã€Š${esc(r.bookTitle)}ã€‹</div><div>${esc(r.content||'')}</div></div>`).join('')||'<div class="meta">æš‚æ— ä¹¦è¯„</div>'}</div>`;}load();</script></body></html>